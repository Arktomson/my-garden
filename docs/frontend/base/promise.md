---
title: promise
---

# promise

## 1. promise 是什么

* promise 是异步编程的一种解决方案，promise js中用于处理“异步”操作的“对象”，编写代码变得更加“优雅”，比传统的解决方案——回调函数和事件——更合理和更强大。
* promise相当于预定好了 成功和失败，异步操作完成后会调用约定好的内容“发布订阅”，只是在回调的基础上增加了封装和抽象

## 2. 有了promise解决了哪些问题?
1. 统一了异步编程的范式，在 Promise 出现之前，开发者需要使用回调、事件监听、定时器等方式处理异步操作，这些方式各自独立，缺乏统一性。
2. 回调地狱问题，恶魔金字塔，嵌套层级很深，难以控制。 promise中有链式调用,配合async await 可以解决回调地狱问题
3. 错误问题，无法统一处理。 promise提供了catch方法可以优雅管理的错误
4. 并发问题，早期可以采用计数器的方式。 promise中提供了很多好用的方法 Promise.all finally allSettled

## 3. promise 缺点
1. 无法取消promise，一旦新建它就会立即执行，无法中途取消。(使用AbortController可以取消)
2. 如果不设置回调函数，promise内部抛出的错误，不会反应到外部。(then方法中抛出的错误，如果没有catch方法，会吞掉错误)
3. 当处于pending状态时，无法得知目前进展到哪一个阶段（刚刚开始还是即将完成）。(文件上传可以使用fetch的onProgress方法)

## 4. promise 的实现

1. 
